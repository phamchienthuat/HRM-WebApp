<mat-form-field appearance="outline" class="full-width" *ngIf="options">
  <mat-label>{{ label }}</mat-label>
  <mat-select
    [formControl]="formControl"
    #select
    [required]="required"
    (selectionChange)="onChangeValue($event)"
    [multiple]="multiple"
    [disabled]="disabled"
    [(ngModel)]="innerValue"
    (openedChange)="openedChange($event)"
  >
    <mat-option *ngIf="options.length" class="mdl-select-filter">
      <input
        matInput
        placeholder="Filter..."
        [formControl]="searchControl"
        style="border: none; width: 100%"
        (click)="$event.stopPropagation()"
        (keydown)="$event.stopPropagation()"
      />
    </mat-option>

    <mat-option *ngFor="let option of filteredList" [value]="option.id">
      {{ option.name }}
    </mat-option>
  </mat-select>
  <mat-error *ngIf="required && formControl?.hasError('required')">
    {{ requiredMessage }}
  </mat-error>
</mat-form-field>
